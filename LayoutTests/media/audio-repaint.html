<body onload="bodyLoaded()">
<p>
    This tests that in a html document with inline audio content, the media element repaints correctly
    while playing.
</p>
<audio controls autoplay src="content/silence.wav"></audio><br/>
<audio controls autoplay src="content/silence.wav" style="margin-bottom:25px; -webkit-box-reflect:below;"></audio><br/>
<audio controls autoplay src="content/silence.wav" style="margin:27px 0; -webkit-transform: rotate(15deg);"></audio><br>
<script>
    if (window.layoutTestController)
        layoutTestController.waitUntilDone();

    if (window.layoutTestController)
        layoutTestController.display();

    function bodyLoaded() {
        setTimeout(function(){
            var audioElements = document.getElementsByTagName('audio');
            var count = audioElements.length;
            for (i = 0; i < count; ++i) {
                var audio = audioElements[i];
                audio.pause();
                audio.addEventListener("seeked", function() {
                    if (!--count && window.layoutTestController)
                        layoutTestController.notifyDone();
                }, true);
                audio.currentTime = audio.duration * 0.50;
            }
        }, 100);
    }
</script>
</body>